<!DOCTYPE HTML>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8">
    <title><%= @item[:title] %></title>
    <link rel="icon" href="/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet"> 
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/stylesheet.css">

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="Nanoc <%= Nanoc::VERSION %>">

    <style>
      .site-header {
        border-bottom: 1px solid #F0F1F4;
      }

      .site-header nav ul li {
        font-size: 1.125rem;
        line-height: 2rem;
      }

      .sidebar {
        border-right: 1px solid rgba(0,0,0,.07);
        background-color: #fff;
        overflow-y: auto;
        padding: 0px 15px 0 0;
        position: fixed;
        top: 0;
        bottom: 0;
        left: auto;
        height: 100%;
        opacity: 1;
        transition: transform opacity .25s ease-out;
        width: 300px;
        z-index: 20;
      }

      #main {
        position: relative;
        top: 0;
        right: 0;
        bottom: 0;
        left: 300px;
        width: calc(100% - 300px);
        transition: left .25s ease;
      }

      .content>:first-child {
        margin-top: 0;
      }

      h2 {
        margin-top: 4rem;
        margin-bottom: 0.5rem;
        color: #0F2C5E;
        font-weight: 600;
      }

      h3 {
        margin-top: 4rem;
        margin-bottom: 0.5rem;
        color: #0F2C5E;
        font-weight: 600;
      }

      h4 {
        margin-top: 2rem;
        margin-bottom: 1rem;
        color: #061738;
        font-weight: 600;
      }

      h2 + h4 {
        margin-top: 0;
      }

      blockquote>:first-child {
        margin-top: 0;
      }

      blockquote>:last-child {
        margin-bottom: 0;
      }

      .content ul.task-list li > ul {
        margin-top: 0;
      }

      h4 {
        margin-bottom: 0;
      }

      p {
        margin: 0.5rem 0;
      }

      .collapse-icon {
        width: 16px;
        height: 16px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cg transform='translate(0 16) rotate(-90)'%3E%3Cg transform='translate(1.41 4.022)'%3E%3Crect class='a' fill='%236F809E' width='1.667' height='9.575' rx='0.833' transform='translate(0 1.179) rotate(-45)'/%3E%3Crect class='a' fill='%236F809E' width='1.667' height='9.575' rx='0.833' transform='translate(6.761 7.949) rotate(-135)'/%3E%3C/g%3E%3Crect class='b' fill='none' width='16' height='16' transform='translate(0 0)'/%3E%3C/g%3E%3C/svg%3E");
      }

      .collapse-icon svg {
        display: none;
      }

      .chevron-down {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cg transform='translate(0 0)'%3E%3Cg transform='translate(1.41 4.022)'%3E%3Crect class='a' fill='%236F809E' width='1.667' height='9.575' rx='0.833' transform='translate(0 1.179) rotate(-45)'/%3E%3Crect class='a' fill='%236F809E' width='1.667' height='9.575' rx='0.833' transform='translate(6.761 7.949) rotate(-135)'/%3E%3C/g%3E%3Crect class='b' fill='none' width='16' height='16' transform='translate(0 0)'/%3E%3C/g%3E%3C/svg%3E");
      }

      table {
        margin-top: 10px;
      }

      .video-player {
        display: inline-block;
        width: 816px;
        max-width: 100%;
        margin: 1rem 0;
      }
    </style>
  </head>
  <body class="font-roboto text-size-base text-base-color">
    <div class="container m-auto">
      <aside id="sidebar" class="sidebar">
        <%= render '/partials/sidebar.*' %>
      </aside>
      <div id="main">
        <%= render '/partials/header.*' %>
        <div class="content p-8">
          <%= yield %>  
        </div>
      </div>
    </div>

    <script src="/pixel.js"></script>
    <script>
      (function(h,o,t,j,a,r){
          h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
          h._hjSettings={hjid:2572536,hjsv:6};
          a=o.getElementsByTagName('head')[0];
          r=o.createElement('script');r.async=1;
          r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
          a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>

  <script>
    function reset(item) {
      // remove currentTab item from local storage
      window.localStorage.removeItem("currentTab");
        
      if(item.querySelector(".collapse-body")?.classList.contains("block")) {
        item.querySelector(".collapse-body")?.classList.remove("hidden");
      }
    }

    document.querySelector(".logo").addEventListener("click", () => {
      document.querySelectorAll("aside nav > ul > li").forEach((item, key)=> {
        reset(item);
      });
    });

    document.querySelectorAll(".site-header > nav > ul > li").forEach((item, key) => {
      item.addEventListener("click", () => {
         reset(item);
      });
    });

    document.querySelectorAll("aside nav > ul > li").forEach((item, key)=> {
      item.addEventListener("click", (event) => {
        if(!item.querySelector(".collapse-body")) {
          reset(item);
        }
      });

      item.querySelector(".collapse-title")?.addEventListener("click", (event) => {
        window.localStorage.setItem("currentTab", key);
        item.querySelector(".collapse-icon").classList.toggle("chevron-down");
      });

      if(window.localStorage.getItem("currentTab") == key) {
        if(item.querySelector(".collapse-body")?.classList.contains("hidden")) {
          item.querySelector(".collapse-body")?.classList.remove("hidden");
          item.querySelector(".collapse-body")?.classList.add("block");
          item.querySelector(".collapse-icon").classList.add("chevron-down");
        }
      }
    });
  </script>
  </body>
</html>
